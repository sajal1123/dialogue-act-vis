{"ast":null,"code":"import React,{useEffect,useRef}from'react';import*as d3 from'd3';import'd3-selection';import DaNames from'../../data/DaNames';import jsonData from'../../data/Conv11103.json';import EDAs from'../../data/daMap';import actNum from'../../data/daLabelsDict';import{jsx as _jsx}from\"react/jsx-runtime\";const WordCloud=props=>{const svgRef=useRef(null);const data=props.data;const daLabels=data.map(row=>[EDAs[actNum[row['act']]],actNum[row['act']]]);const words=countNumbers(daLabels);useEffect(()=>{const svg=d3.select(svgRef.current);const width=400;const height=300;const radiusScale=d3.scaleSqrt().domain([0,2]).range([0,30]);const padding=3;svg.selectAll('circle').remove();// Remove existing circles\nsvg.selectAll('text').remove();// Remove existing texts\nconst data=Object.entries(words).map(_ref=>{let[text,count]=_ref;return{text,count:count[0],radius:radiusScale(count[0]),code:count[1]};});const simulation=d3.forceSimulation(data).force('collide',d3.forceCollide().radius(d=>d.radius+padding)).force('x',d3.forceX(width/3).strength(0.05)).force('y',d3.forceY(height/2).strength(0.05)).force('charge',d3.forceManyBody().strength(5));const circles=svg.selectAll('circle').data(data).enter().append('circle').attr('r',d=>d.radius).attr('fill','lightblue').attr('stroke','blue').on('mouseover',function(e,d){// Handle mouseover event\nconst text=d.text;const count=d.count;const code=d.code;d3.select(this).style('opacity',0.5);// Show the tooltip\ntooltip.transition().duration(1000).style('opacity',0.9);// Update tooltip HTML content with the desired information\ntooltip.html(\"\\n            <div>DA Label: \".concat(text,\"</div>\\n            <div>Count: \").concat(count,\"</div>\\n            <div>Abbreviation: \").concat(code,\"</div>\\n        \")).style('left',e.pageX+'px').style('top',e.pageY-28+'px');}).on('mouseout',function(){// Handle mouseout event\n// Hide the tooltip\nd3.select(this).style('opacity',1);tooltip.transition().duration(1000).style('opacity',0);});const tooltip=d3.select('body').append('div').style('position','absolute').style('background','white').style('border','1px solid #ccc').style('padding','10px').style('border-radius','5px').style('pointer-events','none').style('opacity',0);circles.each(function(d,i){const circle=d3.select(this);const text=svg.append('text').attr('x',+circle.attr('cx')).attr('y',+circle.attr('cy')).attr('text-anchor','middle').attr('dominant-baseline','middle').text(d.code).attr('fill','black');// }\n});simulation.on('tick',()=>{circles.attr('cx',d=>d.x).attr('cy',d=>d.y);circles.each(function(d,i){const circle=d3.select(this);const text=svg.selectAll('text').filter((_,index)=>index===i);text.attr('x',d.x).attr('y',d.y);});});},[words]);return/*#__PURE__*/_jsx(\"svg\",{ref:svgRef,width:\"100%\",height:'100%',style:{'paddingLeft':'25%'}});};export default WordCloud;function countNumbers(numbers){const countDict={};for(const number of numbers){if(countDict[number[0]]==undefined){countDict[number[0]]=[1,number[1]];}else{countDict[number[0]][0]+=1;}}return countDict;}","map":{"version":3,"names":["React","useEffect","useRef","d3","DaNames","jsonData","EDAs","actNum","jsx","_jsx","WordCloud","props","svgRef","data","daLabels","map","row","words","countNumbers","svg","select","current","width","height","radiusScale","scaleSqrt","domain","range","padding","selectAll","remove","Object","entries","_ref","text","count","radius","code","simulation","forceSimulation","force","forceCollide","d","forceX","strength","forceY","forceManyBody","circles","enter","append","attr","on","e","style","tooltip","transition","duration","html","concat","pageX","pageY","each","i","circle","x","y","filter","_","index","ref","numbers","countDict","number","undefined"],"sources":["/Users/sajalchandra/Desktop/UIC/UIC Sem 3/CS 529/Final Project Deployment/dialogue-act-vis/src/components/visualizations/wordCloud.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport 'd3-selection';\nimport DaNames from '../../data/DaNames';\nimport jsonData from '../../data/Conv11103.json'\nimport EDAs from '../../data/daMap';\nimport actNum from '../../data/daLabelsDict';\n\nconst WordCloud = (props) => {\n  const svgRef = useRef(null);\n\n  const data = props.data;\n\n  const daLabels = data.map(row => ([EDAs[actNum[row['act']]], actNum[row['act']]]));\n\n  const words = countNumbers(daLabels);\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    const width = 400;\n    const height = 300;\n    const radiusScale = d3.scaleSqrt().domain([0, 2]).range([0, 30]);\n    const padding = 3;\n\n    svg.selectAll('circle').remove(); // Remove existing circles\n    svg.selectAll('text').remove(); // Remove existing texts\n\n    const data = Object.entries(words).map(([text, count]) => ({\n      text,\n      count: count[0],\n      radius: radiusScale(count[0]),\n      code: count[1]\n    }));\n \n    const simulation = d3.forceSimulation(data)\n      .force('collide', d3.forceCollide().radius(d => d.radius + padding))\n      .force('x', d3.forceX(width / 3).strength(0.05))\n      .force('y', d3.forceY(height / 2).strength(0.05))\n      .force('charge', d3.forceManyBody().strength(5));\n\n    const circles = svg.selectAll('circle')\n      .data(data)\n      .enter()\n      .append('circle')\n      .attr('r', d => d.radius)\n      .attr('fill', 'lightblue')\n      .attr('stroke', 'blue')\n      .on('mouseover', function (e, d) {\n        // Handle mouseover event\n        const text = d.text;\n        const count = d.count;\n        const code = d.code;\n\n        d3.select(this).style('opacity', 0.5);\n\n        // Show the tooltip\n        tooltip.transition()\n          .duration(1000)\n          .style('opacity', 0.9);\n\n        // Update tooltip HTML content with the desired information\n        tooltip.html(`\n            <div>DA Label: ${text}</div>\n            <div>Count: ${count}</div>\n            <div>Abbreviation: ${code}</div>\n        `)\n          .style('left', (e.pageX) + 'px')\n          .style('top', (e.pageY - 28) + 'px');\n      })\n      .on('mouseout', function () {\n        // Handle mouseout event\n        // Hide the tooltip\n        d3.select(this).style('opacity', 1);\n        tooltip.transition()\n          .duration(1000)\n          .style('opacity', 0);\n      });\n\n    const tooltip = d3.select('body')\n      .append('div')\n      .style('position', 'absolute')\n      .style('background', 'white')\n      .style('border', '1px solid #ccc')\n      .style('padding', '10px')\n      .style('border-radius', '5px')\n      .style('pointer-events', 'none')\n      .style('opacity', 0);\n\n    circles.each(function (d, i) {\n      const circle = d3.select(this);\n\n      const text = svg\n        .append('text')\n        .attr('x', +circle.attr('cx'))\n        .attr('y', +circle.attr('cy'))\n        .attr('text-anchor', 'middle')\n        .attr('dominant-baseline', 'middle')\n        .text(d.code)\n        .attr('fill', 'black');\n      // }\n    });\n\n\n    simulation.on('tick', () => {\n      circles\n        .attr('cx', d => d.x)\n        .attr('cy', d => d.y);\n\n      circles.each(function (d, i) {\n        const circle = d3.select(this);\n        const text = svg\n          .selectAll('text')\n          .filter((_, index) => index === i);\n\n        text\n          .attr('x', d.x)\n          .attr('y', d.y);\n      });\n    });\n  }, [words]);\n\n  return <svg ref={svgRef} width=\"100%\" height={'100%'} style={{'paddingLeft': '25%'}}></svg>;\n};\n\nexport default WordCloud;\n\n\nfunction countNumbers(numbers) {\n  const countDict = {}; \n\n  for (const number of numbers) {\n    if (countDict[number[0]] == undefined) {\n      countDict[number[0]] = [1, number[1]];\n    } else {\n      countDict[number[0]][0] += 1;\n    }\n  }\n\n  return countDict;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}